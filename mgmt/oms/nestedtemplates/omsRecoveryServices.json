{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "omsRecoveryVaultName": {
      "type": "string",
      "defaultValue": "",
      "metadata": {
        "description": "Assign a name for the ASR Recovery Vault"
      }
    },
    "omsRecoveryVaultRegion": {
      "type": "string",
      "defaultValue": "West Europe",
      "allowedValues": [
        "West US",
        "East US",
        "North Europe",
        "West Europe",
        "Brazil South",
        "East Asia",
        "Southeast Asia",
        "North Central US",
        "South Central US",
        "Japan East",
        "Japan West",
        "Australia East",
        "Australia Southeast",
        "Central US",
        "East US 2",
        "Central India",
        "South India"
      ],
      "metadata": {
        "description": "Specify the region for your Recovery Vault"
      }
    }
  },
  "variables": {
    "recoveryStorageAccountName": "[toLower(concat('asr', uniqueString(resourceGroup().id)))]",
    "recoveryStorageType": "Standard_LRS"
  },
  "resources": [
    {
      "apiVersion": "2016-06-01",
      "location": "[parameters('omsRecoveryVaultRegion')]",
      "name": "[parameters('omsRecoveryVaultName')]",
      "type": "Microsoft.RecoveryServices/vaults",
      "comments": "ASR Recovery Vault for OMS",
      "sku": {
        "name": "RS0",
        "tier": "Standard"
      },
      "properties": { }
    },
    {
      "apiVersion": "2015-06-15",
      "location": "[parameters('omsRecoveryVaultRegion')]",
      "name": "[variables('recoveryStorageAccountName')]",
      "type": "Microsoft.Storage/storageAccounts",
      "comments": "Storage account for ASR",
      "properties": {
        "accountType": "[variables('recoveryStorageType')]"
      }
    }
  ],
  "outputs": { }
}

